# 企业建模 (Organization Modeling)

## 概述
企业建模是 U9 cloud 的“地基”。U9 采用多组织、多核算、多账簿的架构，能够支持从单体企业到大型集团的灵活扩展。通过建立逻辑上的“组织树”并赋予其职能，实现集团内部的高效协同。

## 1. 组织层级与类型

### 1.1 法人实体 (Legal Entity)
- **定义**: 法律意义上的公司，拥有独立的统一社会信用代码，是财务核算（法人账）的最高层级。
- **属性**: 关联税制、本位币、会计日历。

### 1.2 业务组织 (Business Organization)
- **定义**: 执行具体业务的逻辑单元。一个法人实体下可以包含多个业务组织，甚至一个业务组织可以跨越多个物理位置。
- **组织职能**: 组织不只是一个名字，必须赋予其职能，系统才会开启相应的菜单和逻辑：
  - **销售职能**: 可录入销售订单、价表、出货。
  - **采购职能**: 可执行采购寻源、下单、收货。
  - **库存职能**: 管理库房、货位、执行调拨。
  - **生产职能**: 执行排产、开具生产订单、汇报工序。
  - **核算职能**: 负责成本归集与凭证生成。

## 2. 组织间业务关系 (Inter-Org Relations)
这是 U9 实现多组织协同的灵魂。通过配置业务关系，系统可以自动处理跨组织业务：
- **内部交易关系**: 定义 A 组织向 B 组织购买产品时的结算单价、币种和自动抛单规则。
- **直运协同**: 客户向 A 下单，A 通知 B 发货，B 直接寄给客户，系统自动处理 A 与 B 之间的财务结算。
- **委外协同**: A 组织将工序委托给 B 组织加工。

## 3. 职能与用户权限
- **数据隔离**: 用户登录系统时必须选择“上下文组织”。系统根据该组织的职能过滤功能菜单，并根据用户的组织权限过滤业务数据。
- **共享与私有**: 基础资料（如料品、供应商）可以设置为“全局共享”、“组织私有”或“按组织授权使用”。

## 4. 最佳实践：如何规划组织架构
- **工厂模式**: 1 个法人 + N 个生产职能组织 + 1 个统一销售组织。
- **商贸模式**: 1 个集团总部（核算） + 分布在各地的销售分公司（销售职能）。
- **阿米巴模式**: 将生产车间定义为独立的核算组织，实现内部损益考核。
