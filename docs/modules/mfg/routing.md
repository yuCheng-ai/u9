# 工艺路线与资源 (Routing)

## 概述
如果说 BOM 定义了产品“由什么组成”，那么工艺路线（Routing）就定义了产品“是如何制造出来的”。工艺路线连接了物料、工序、工作中心和资源，是生产排产（APS/MRP）和成本核算的核心依据。

## 1. 工艺路线的核心构成

### 1.1 工序 (Operation)
- **定义**: 制造过程中的一个最小独立步骤（如：下料、焊接、组装、检验）。
- **关键属性**:
  - **准备工时 (Setup Time)**: 开始生产前调整机器、准备工装的时间，通常与批量无关。
  - **运行工时 (Run Time)**: 加工单位产品所需的时间。
  - **等待/移动工时**: 工序间的非生产时间。
  - **关键工序标识**: 是否为产能瓶颈点。

### 1.2 工作中心 (Work Center)
- **定义**: 执行工序的物理区域或逻辑单元。
- **能力定义**: 定义该工作中心每天能提供的有效工时（考虑班次、出勤率）。
- **成本归集**: 工作中心是制造费用分摊的最小单位。

### 1.3 资源 (Resources)
- **人/机资源**: 具体执行工作的员工或设备。
- **资源效率**: 考虑不同设备的加工速度差异。

## 2. 委外工序 (Subcontracted Operation)
U9 支持将工艺路线中的某一个环节（而非整个产品）外包给供应商：
- **逻辑点**: 生产订单运行到该工序时，系统自动触发“委外申请”。
- **物流控制**: 记录物料发出到委外商、加工完成收回的全过程。
- **费用结算**: 委外费用作为加工费，直接计入生产订单的工序成本。

## 3. 多路径工艺路线
- **主工艺路线**: 标准生产流程。
- **替代工艺路线**: 当主线设备故障或产能饱和时，可以选择备用设备和流程。
- **版本控制**: 工艺路线同样支持版本管理和生效日期控制。

## 4. 工序与物料的关联 (Material Allocation)
- **发料点控制**: 明确每个零件应该在哪个工序被领用。
- **价值**: 
  - **精确领料**: 避免所有物料都在第一道工序堆积。
  - **在制品 (WIP) 计算**: 实时掌握每个工序积压了多少价值的半成品。

## 5. 核心应用：APS 精细化排产
- **有限产能排产**: APS 引擎读取工艺路线中的工时数据和工作中心的产能，自动计算出每台机器、每个工位的最优排班表。
- **甘特图展示**: 动态调整工序顺序，自动更新后续工序的开始时间。
